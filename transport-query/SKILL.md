---
name: transport-query
description: äº¤é€šç­æ¬¡æŸ¥è©¢æŠ€èƒ½ï¼ˆé«˜éµ/å°éµï¼‰ï¼Œè‡ªå‹•è§£æç«™é»èˆ‡æ—¥æœŸï¼ŒæŸ¥è©¢ç­æ¬¡
license: MIT
compatibility: opencode
---

# äº¤é€šæŸ¥è©¢æŠ€èƒ½

æ ¹æ“šç”¨æˆ¶è¼¸å…¥æŸ¥è©¢é«˜éµæˆ–å°éµç­æ¬¡ã€‚

---

## æ”¯æ´æ ¼å¼

| ç¯„ä¾‹ | è§£æçµæœ |
|------|----------|
| `å°ä¸­å»é«˜é›„ 2/8` | é«˜éµï¼Œå°ä¸­(1040) â†’ é«˜é›„å·¦ç‡Ÿ(1070)ï¼Œ2026-02-08 |
| `å°åŒ—åˆ°å·¦ç‡Ÿ ä¸‹é€±äº”` | é«˜éµï¼Œå°åŒ—(1000) â†’ å·¦ç‡Ÿ(1070)ï¼Œä¸‹é€±äº” |
| `ç«è»Š æ¡ƒåœ’ èŠ±è“®` | å°éµï¼Œæ¡ƒåœ’ â†’ èŠ±è“®ï¼Œä»Šå¤© |

**æ—¥æœŸæ ¼å¼**ï¼šYYYY-MM-DDã€MM/DDã€æ˜å¤©ã€å¾Œå¤©ã€é€±X

---

## å·¥ä½œæµç¨‹

```
1. è§£æè¼¸å…¥ â†’ ç«™å + æ—¥æœŸ + äº¤é€šé¡å‹
2. æŸ¥ station-aliases.json â†’ StationID
3. å‘¼å« Filter Service â†’ å–å¾—ç­æ¬¡ï¼ˆéæ¿¾ç²¾ç°¡ï¼‰
4. æ ¼å¼åŒ–è¼¸å‡º â†’ è¡¨æ ¼å‘ˆç¾
```

---

## Filter Service API

**ç«¯é»**ï¼š`http://tdx-filter-service-fral.zeabur.internal:8080`

### é«˜éµæ™‚åˆ»è¡¨

```
POST /thsr/timetable
```

**è«‹æ±‚**ï¼š
```json
{
  "origin": "1040",
  "dest": "1070",
  "date": "2026-02-16",
  "after_time": "20:00",
  "limit": 10
}
```

**å›æ‡‰**ï¼š
```json
{
  "origin": "å°ä¸­",
  "dest": "å·¦ç‡Ÿ",
  "date": "2026-02-16",
  "trains": [
    {
      "train_no": "0157",
      "departure": "20:20",
      "arrival": "21:05",
      "duration_min": 45
    }
  ],
  "count": 10
}
```

---

## ç«™é»å°ç…§

| ç«™å | é«˜éµ ID | å°éµ ID |
|------|---------|---------|
| å°åŒ— | 1000 | 1000 |
| æ¿æ©‹ | 1010 | 1020 |
| æ¡ƒåœ’ | 1020 | 1030 |
| æ–°ç«¹ | 1030 | 1040 |
| å°ä¸­ | 1040 | 1150 |
| å½°åŒ– | 1045 | 1190 |
| é›²æ— | 1050 | 1210 |
| å˜‰ç¾© | 1060 | 1230 |
| å°å— | 1065 | 1260 |
| å·¦ç‡Ÿ | 1070 | 1280 |

å®Œæ•´å°ç…§è¡¨ï¼š`references/station-aliases.json`

---

## è¼¸å‡ºç¯„ä¾‹

```
ğŸš„ å°ä¸­ â†’ å·¦ç‡Ÿï¼ˆé«˜éµï¼‰2026-02-16

| è»Šæ¬¡ | ç™¼è»Š | æŠµé” | è»Šç¨‹ |
|------|------|------|------|
| 0157 | 20:20 | 21:05 | 45åˆ† |
| 0679 | 20:25 | 21:20 | 55åˆ† |
```

---

## éŒ¯èª¤è™•ç†

| æƒ…æ³ | å›æ‡‰ |
|------|------|
| ç«™é»ç„¡æ³•è­˜åˆ¥ | ã€ŒæŠ±æ­‰ï¼Œç„¡æ³•è­˜åˆ¥ã€XXXã€‘ï¼Œè«‹ä½¿ç”¨æ­£å¼ç«™åã€‚ã€ |
| æ—¥æœŸç„¡æ³•è§£æ | ã€ŒæŠ±æ­‰ï¼Œç„¡æ³•è­˜åˆ¥ã€XXXã€‘æ—¥æœŸï¼Œè«‹ä½¿ç”¨ YYYY-MM-DDã€‚ã€ |
| Filter Service é€£ç·šå¤±æ•— | ã€ŒæŸ¥è©¢æœå‹™æš«æ™‚ç„¡æ³•ä½¿ç”¨ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚ã€ |
| API é¡åº¦ç”¨ç›¡ | ã€ŒAPI é¡åº¦å·²ç”¨å®Œï¼Œè«‹æ˜å¤©å†è©¦ã€‚ã€ |

---

## å‚™ç”¨æ–¹æ¡ˆï¼šç›´æ¥å‘¼å« TDXï¼ˆç„¡ Filter Serviceï¼‰

è‹¥ Filter Service ä¸å¯ç”¨ï¼Œæ¯æ—¥ 20 æ¬¡å…é¡åº¦ï¼Œç›´æ¥å‘¼å« TDXï¼š

```bash
# å–å¾— token
TOKEN=$(node -e "console.log(JSON.parse(require('fs').readFileSync('/home/node/.openclaw/workspace/credentials/tdx-token.json').toString()).access_token)")

# é«˜éµ - OD æŸ¥è©¢
curl -s "https://tdx.transportdata.tw/api/basic/v2/Rail/THSR/DailyTimetable/OD/1040/to/1070/2026-02-16" \
    -H "Authorization: Bearer $TOKEN"
```

**æ³¨æ„**ï¼šç›´æ¥å‘¼å« TDX å›å‚³è³‡æ–™é‡å¤§ï¼Œæœƒæ¶ˆè€—è¼ƒå¤š Tokenï¼Œè«‹å„ªå…ˆä½¿ç”¨ Filter Serviceã€‚
